---
version: '3'
services:
    deploy:
        build:
            context: ./deploy
            dockerfile: Deploy.Dockerfile
        volumes:
            - /tmp:/tmp
        command: sh -c "cd /tmp && cp /tmp/java-war-project/target/my-app.war /tmp"
    prod:
        build:
            context: ./prod
            dockerfile: Prod.Dockerfile
        ports:
            - '8181:8080'
        links:
          - 'deploy'
        volumes:
          - /tmp:/tmp
